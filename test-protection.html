<!DOCTYPE html>
<html>
<head>
    <title>Teste de Prote√ß√£o - Galeria Assinantes</title>
</head>
<body>
    <h1>Teste de Prote√ß√£o da Galeria de Assinantes</h1>
    
    <div>
        <h2>A√ß√µes de Teste</h2>
        <button onclick="clearAuth()">Limpar Autentica√ß√£o</button>
        <button onclick="clearSubscription()">Limpar Assinatura</button>
        <button onclick="clearAll()">Limpar Tudo</button>
        <button onclick="checkAccess()">Verificar Acesso Atual</button>
        <button onclick="testGaleria()">Testar Acesso √† Galeria</button>
    </div>
    
    <div id="status" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;">
        Status: Aguardando teste...
    </div>
    
    <script>
        function updateStatus(msg) {
            document.getElementById('status').innerHTML = msg;
        }
        
        function clearAuth() {
            localStorage.removeItem('isAuthenticated');
            localStorage.removeItem('userType');
            localStorage.removeItem('userEmail');
            
            // Limpar cookies
            document.cookie = 'isAuthenticated=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT';
            
            updateStatus('‚úÖ Autentica√ß√£o limpa! Usu√°rio n√£o est√° mais autenticado.');
        }
        
        function clearSubscription() {
            localStorage.removeItem('hasSubscription');
            localStorage.removeItem('hasActiveSubscription');
            localStorage.removeItem('subscriptionData');
            
            // Limpar cookies
            document.cookie = 'hasSubscription=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT';
            
            updateStatus('‚úÖ Assinatura limpa! Usu√°rio n√£o tem mais assinatura ativa.');
        }
        
        function clearAll() {
            // Limpar localStorage
            localStorage.clear();
            
            // Limpar todos os cookies relevantes
            document.cookie = 'isAuthenticated=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT';
            document.cookie = 'hasSubscription=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT';
            
            updateStatus('‚úÖ Todos os dados limpos! Usu√°rio n√£o autenticado e sem assinatura.');
        }
        
        function checkAccess() {
            const isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';
            const hasSubscription = localStorage.getItem('hasSubscription') === 'true';
            const userEmail = localStorage.getItem('userEmail');
            
            let status = '<h3>Status Atual:</h3>';
            status += `<p>üîë Autenticado: ${isAuthenticated ? '‚úÖ Sim' : '‚ùå N√£o'}</p>`;
            status += `<p>üíé Assinatura Ativa: ${hasSubscription ? '‚úÖ Sim' : '‚ùå N√£o'}</p>`;
            status += `<p>üìß Email: ${userEmail || 'N√£o definido'}</p>`;
            
            updateStatus(status);
        }
        
        function testGaleria() {
            updateStatus('üîÑ Redirecionando para galeria de assinantes...');
            window.location.href = '/galeria-assinantes';
        }
        
        // Verificar status inicial
        checkAccess();
    </script>
</body>
</html>
